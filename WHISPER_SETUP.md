# 音声文字起こし機能セットアップガイド

このガイドでは、OpenAI Whisper APIを使った音声文字起こし機能の設定方法を説明します。

## 必要なもの

- OpenAI APIキー（[platform.openai.com](https://platform.openai.com/api-keys) で取得）
- Pythonパッケージ: openai, python-dotenv（既にインストール済み）

## セットアップ手順

### 1. OpenAI APIキーを取得

1. [OpenAI Platform](https://platform.openai.com/api-keys) にアクセス
2. アカウントにログイン（まだない場合は新規登録）
3. 「Create new secret key」をクリック
4. APIキーをコピー（このキーは一度しか表示されません）

### 2. 環境変数の設定

プロジェクトのルートディレクトリに `.env` ファイルを作成します：

```bash
# .env
OPENAI_API_KEY=sk-proj-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
```

**重要:** `.env` ファイルは `.gitignore` に含まれているため、Gitにコミットされません。

### 3. パッケージのインストール

```bash
pip install -r requirements.txt
```

### 4. アプリの起動

```bash
streamlit run app.py
```

## 使い方

### 音声ファイルをアップロードして文字起こし

1. ホストとしてログイン
2. ミーティングを作成または選択
3. 「📝 議事録」タブに移動
4. 「🎤 録音」タブを開く
5. 音声ファイル（mp3, wav, m4a）をアップロード
6. 「🚀 文字起こしを開始」ボタンをクリック
7. 処理が完了すると、議事録として自動保存されます

### 対応ファイル形式

- **mp3** - 最も一般的な形式
- **wav** - 高品質な非圧縮形式
- **m4a** - iPhoneなどで録音された形式

### 制限事項

- ファイルサイズ上限: **25MB**
- 言語: 日本語に最適化
- 処理時間: ファイルの長さによって数秒〜数分

## トラブルシューティング

### エラー: "OPENAI_API_KEYが設定されていません"

- `.env` ファイルが正しく作成されているか確認
- ファイル名が `.env` であることを確認（`.env.txt` ではない）
- APIキーが正しくコピーされているか確認

### エラー: "OpenAI APIキーが無効です"

- APIキーが期限切れまたは無効になっている可能性があります
- [OpenAI Platform](https://platform.openai.com/api-keys) で新しいキーを作成してください

### エラー: "ファイルサイズが大きすぎます"

- 音声ファイルを圧縮してください
- または、音声を短い部分に分割してアップロードしてください

### 処理が遅い

- Whisper APIの処理速度は音声の長さに依存します
- 長い音声ファイルは数分かかる場合があります
- ネットワーク接続を確認してください

## 料金について

OpenAI Whisper APIの料金は以下の通りです（2025年1月時点）：

- **$0.006 / 分**（音声の長さ）

例：
- 10分の音声 = $0.06
- 60分の音声 = $0.36

詳細は [OpenAI Pricing](https://openai.com/pricing) を確認してください。

## セキュリティに関する注意

- `.env` ファイルは絶対にGitにコミットしないでください
- APIキーは第三者と共有しないでください
- 不要になったAPIキーは削除してください

## サポート

問題が発生した場合は、以下を確認してください：

1. `.env` ファイルが正しく設定されているか
2. パッケージが正しくインストールされているか
3. OpenAI APIの利用可能残高があるか
